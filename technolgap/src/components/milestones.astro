---
// src/components/milestones.astro
import { createClient } from "contentful";


const client = createClient({
  space: "33d3d7kdmbg5",
  accessToken: "00BZSByF4Gmh1S-vDtMfsmOLIdqrC8fyV404sOfIwzM",
});

// Fetch milestones from Contentful
const response = await client.getEntries({
    content_type: "milestone",
    order: ["fields.year"] // Order milestones by year
});
const milestones = response.items;
---

<section id="milestones">
    <h3>Milestones at Technolgap</h3>
    <div class="timeline">
        {milestones.map((milestone) => (
            <div class="milestone">
                <div class="circle">
                    <h4>{milestone.fields.year}</h4>
                    <p>{milestone.fields.description}</p>
                </div>
            </div>
        ))}
    </div>
</section>

<style>
    #milestones {
        display: flex;
        flex-direction: column;
        align-items: center;
    }
    h3 {
        font-size: 1.8rem;
        margin-bottom: 1rem;
    }
    .timeline {
        display: grid;
        gap: 2rem;
        justify-items: center;
        position: relative;
        width: 80%;
        max-width: 600px;
    }
    .milestone {
        display: flex;
        flex-direction: column;
        align-items: center;
        position: relative;
    }
    .circle {
        background-color: #2e5f3e; /* Green color for circles */
        background: linear-gradient(135deg, #2D6D68DD,  #64A8A2DD);
        color: white;
        width: 170px;
        height: 170px;
        border-radius: 50%;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        font-size: 1rem;
    }
    .circle h4 {
        margin: 0;
        font-size: 1.2rem;
    }
    .circle p {
        margin: 0.5rem 0 0;
        font-size: 0.9rem;
        text-align: center;
    }
    .milestone::before {
        content: "";
        position: absolute;
        top: -2rem;
        left: 50%;
        transform: translateX(-50%);
        width: 4px;
        height: 2rem;
        background-color: #FFBCE5; /* Pink connecting line */
    }
    .milestone:first-of-type::before {
        display: none; /* No line above the first item */
    }
</style>
