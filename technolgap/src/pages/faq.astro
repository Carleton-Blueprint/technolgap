---
import type { Entry } from 'contentful';

import { createClient } from "contentful";
import PageLayout from "../layouts/PageLayout.astro";
import Subheading from "../components/Subheading.astro";
import FaqAccordian from '../components/FaqAccordian.astro';

// Assuming `faqList` is fetched from an API or defined here
// Contentful client setup
const client = createClient({
  space: "33d3d7kdmbg5",
  accessToken: "00BZSByF4Gmh1S-vDtMfsmOLIdqrC8fyV404sOfIwzM",
});

// Define the FAQ fields interface
interface FaqFields {
  fields: {
    question: string;
    answer: string;
  };
  contentTypeId: "faq";
}
type Faqitem = Entry<FaqFields>;

// Helper function to fetch FAQs from Contentful
async function fetchFaqs(): Promise<Faqitem[]> {
  const response = await client.getEntries({
    content_type: "faq", // Ensure this matches your Contentful content type
  });
  return response.items as Faqitem[];
}

// Fetch FAQ data asynchronously
const faqList = await fetchFaqs();
---

<PageLayout title="Frequently Asked Questions">
  <article>

    <div>
      <Subheading title="Frequently Asked Questions" />
    </div>
    <!-- Pass the fetched faqList to the Faq component -->
    <FaqAccordian faqList={faqList}/>
  </article>
  </PageLayout>

  <!-- <script>
    document.querySelector("main")?.classList.add("classic-bg");
  </script> -->
  
  <style>

    article {
      background-image: linear-gradient(#fff, #ffeaf8);
      margin: 1px;
      padding: 0;
    }

    div {
      background-image: linear-gradient(90deg, #2d6d68, #77B1AC);
      padding: 20px 0;
      margin-bottom: 100px;
    }
  </style>